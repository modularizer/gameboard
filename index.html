<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chess</title>
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.132.2/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.132.2/examples/jsm/",
          "three/loaders": "https://unpkg.com/three@0.132.2/examples/jsm/loaders/",
          "utils": "./js/utils/index.js",
          "gameengine": "./js/index.js"
        }
      }
    </script>

</head>
<body style="width:100%;height:100%;overflow:hidden">
    <select id="game" style="position: absolute; z-index:9999;">
        <option>chess</option>
        <option>quoridor</option>
        <option>card</option>
        <option>cube</option>
    </select>
    <script type="module">
        import * as THREE from 'three';
        window.THREE = THREE;
        import * as gameengine from 'gameengine';
        import { CustomScene, loadJSON } from 'gameengine';


        window.gameengine = gameengine;
        window.scene = new CustomScene();

        let gameSelect = document.getElementById("game");
        gameSelect.addEventListener("change", (e) => {
            location.hash = e.target.value;
            location.reload();
        });
        window.game = location.hash.replace("#", "") || "chess";
        location.hash = "#" + window.game;
        document.title = window.game;
        gameSelect.value = window.game;
        loadJSON(scene, "./games/" + window.game + "/spec.json").then(models => {
            window.models = models;
        });

    </script>
</body>
</html>